version: '3'
services:
  client:
    build:
      context: .
      dockerfile: ${DOCKERFILE:-Dockerfile}
    image: httpstress
    links:
      - server
    volumes:
      - ${HTTPSTRESS_REPORT_VOLUME_MOUNT_STRING}
    environment:
      - HTTPSTRESS_ARGS=-runMode client -serverUri https://server:5001 ${HTTPSTRESS_CLIENT_ARGS}
  server:
    build:
      context: .
      dockerfile: ${DOCKERFILE:-Dockerfile}
    image: httpstress
    ports:
      - "5001:5001"
    environment:
      - HTTPSTRESS_ARGS=-runMode server -serverUri https://+:5001 ${HTTPSTRESS_SERVER_ARGS}
